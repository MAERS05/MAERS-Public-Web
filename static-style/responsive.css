/* ==========================================================================
   Responsive Design & Mobile Adaptations
   ========================================================================== */

/* --- Component Responsive (1024px) --- */
@media (max-width: 1024px) {
    .photo-item {
        width: calc(50% - 10px);
    }
}

/* --- Mobile Responsive (768px) --- */
@media (max-width: 768px) {
    .photo-item {
        width: 100%;
        height: 140px;
    }

    .lb-nav {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
        background: rgba(0, 0, 0, 0.3);
    }

    .lb-prev {
        left: 10px;
    }

    .lb-next {
        right: 10px;
    }

    .page-title,
    .header-title {
        font-size: 1.6rem;
    }

    .main-card,
    .gallery-content {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        background: transparent !important;
        /* Fix for potential white background in frames */
    }

    /* --- Reorder Interaction (Multi-Select Version) --- */

    /* 1. 移动/选择按钮 (左上角) */
    .move-btn {
        position: absolute;
        top: 10px;
        left: 10px;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 20;
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.3s ease;
        font-size: 1.2rem;
        line-height: 1;
        user-select: none;
    }

    .photo-item:hover .move-btn,
    .photo-item.is-picked .move-btn {
        opacity: 1;
        transform: scale(1);
    }

    /* 选中状态下，按钮变成高亮 */
    .photo-item.is-picked .move-btn {
        background: #78ffd6;
        color: #000;
        border-color: #78ffd6;
        box-shadow: 0 0 15px rgba(120, 255, 214, 0.6);
    }

    /* 2. 选中图片的边框呼吸效果 */
    @keyframes pick-pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(120, 255, 214, 0.4);
            border-color: #78ffd6;
            transform: scale(0.98);
        }

        50% {
            box-shadow: 0 0 0 6px rgba(120, 255, 214, 0);
            border-color: #78ffd6;
            transform: scale(0.98);
        }

        100% {
            box-shadow: 0 0 0 0 rgba(120, 255, 214, 0);
            border-color: #78ffd6;
            transform: scale(0.98);
        }
    }

    .photo-item.is-picked {
        animation: pick-pulse 2s infinite;
        z-index: 100;
        opacity: 1 !important;
    }

    /* 3. 选中序号标记 (右上角，原本删除按钮的位置旁边) */
    .pick-badge {
        position: absolute;
        top: -8px;
        left: -8px;
        background: #ff4757;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        font-size: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        z-index: 30;
        pointer-events: none;
        animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes pop-in {
        from {
            transform: scale(0);
        }

        to {
            transform: scale(1);
        }
    }

    /* 4. 移动模式下的鼠标样式 */
    body.is-reordering .photo-item:not(.is-picked) {
        cursor: alias !important;
        /* 提示放置 */
    }

    body.is-reordering .photo-item.is-picked {
        cursor: not-allowed;
        /* 已选中的不能作为目标 */
    }

    /* ✅ 修正后的代码 */
    /* 移动模式下，禁用删除操作 */
    body.is-reordering .delete-btn {
        pointer-events: none;
        opacity: 0;
    }

    /* --- 修复：分类卡片的选中反馈 --- */

    /* 1. 选中状态：缩小 + 绿色呼吸边框 */
    .category-card.is-picked {
        transform: scale(0.95) !important;
        border-color: #78ffd6 !important;
        background: rgba(120, 255, 214, 0.05) !important;
        box-shadow: 0 0 15px rgba(120, 255, 214, 0.3), inset 0 0 0 1px #78ffd6 !important;
        z-index: 100;
        transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    /* 2. 移动按钮的激活状态 */
    .category-card.is-picked .btn-move {
        background: #78ffd6;
        color: #000;
        border-color: #78ffd6;
        transform: scale(1.1);
    }

    /* 3. 移动模式下，其他卡片变成"可放置"状态 */
    body.is-reordering .category-card:not(.is-picked) {
        opacity: 0.6;
        cursor: alias !important;
        transform: scale(0.98);
    }

    body.is-reordering .category-card:not(.is-picked):hover {
        opacity: 1;
        transform: scale(1.02);
        border-color: #fff;
    }

    /* This seems to be a misplaced rule, assuming it should be part of the media query */
    .delete-btn {
        /* Corrected from 'te-btn' based on context */
        pointer-events: none;
        opacity: 0;
    }
}

/* Closing the @media (max-width: 768px) block */
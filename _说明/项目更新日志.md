# MAERS 项目更新日志

## 📋 目录 (Index)
- [2026-02-03] 侧边栏快速访问 / 相册排序与UI重构

## 2026-02-03

### ✨ 新增 (Features)
- **快速访问 (Quick Access)**：全新重构侧边栏，支持“固定访问”与“最近访问”分区，自动持久化存储。
- **图钉交互系统**：增加可交互图钉图标，支持固定/取消固定文件，具备 Hover 划线动画及深色模式适配。
- **Literature 深度集成**：支持从快速访问直接打开书籍（自动暂停 Flow 动画），并为视图切换按钮添加智能提示（Tooltip）。
- **多标签新建自动归类**：在筛选状态下新建文件，自动应用当前所有筛选标签。
- **筛选状态导航保持**：在筛选模式下进入/返回文件夹，自动在当前路径下维持筛选条件，不再重置为全量列表。
- **标签搜索自动展开**：搜索标签时，自动展开包含匹配项的父分类。

### 🐛 修复 (Fixes)
- **删除即时反馈 (Optimistic UI)**：修复筛选模式下删除文件需手动刷新的问题，改为强制立即移除 DOM 节点。
- **移动端资源缺失**：补全 `mobile-literature.css`，修复 404 报错。
- **模块引用错误**：移除 `admin-main.module.js` 中错误的 `Content` 引用。

### ♻️ 优化 (Refactor)
- **统一刷新逻辑**：重构 `refreshView`，使其根据当前视图模式（普通/筛选）智能决定刷新策略。
- **搜索作用域升级**：`Search` 模块支持基于当前文件夹路径的局部筛选。
- **相册排序重构**：重写相册排序逻辑，新增“时间倒序/正序”功能。支持解析多种格式的时间戳（包括 `20260115_..._72` 带序号高精度格式），完美解决同秒连拍图片的排序问题。
- **相册 UI 优化**：新增下拉式排序菜单 (`Dropdown Menu`)，适配深浅色模式，提升交互体验。


## 2026-02-04

### ✨ 新增 (Features)
- **CMS 智能导航系统**：
    - **自动定位上下文**：在搜索或标签筛选结果中点击文件时，支持自动跳转至文件所在的物理文件夹，并刷新网格视图。
    - **交互式预览确认**：在筛选模式下打开文件时，增加智能弹窗询问：“仅预览内容”或“跳转到所在目录”。
    - **全量视图遮罩**：在激活搜索或筛选时，面包屑导航栏自动显示 "All" 遮罩层，覆盖原有层级路径，明确标识“全局筛选视图”，消除用户困惑。
- **UI/UX 细节优化**：
    - **Music 模块**：优化添加按钮 (`.add-btn`) 交互体验，修复 Hover 时的颜色反转闪烁问题，统一为平滑缩放动画。
    - **Photo 模块**：统一相册头部“上传图片”与“排序”按钮的视觉风格，确保 Dark/Light 模式下的一致性。

### 🐛 修复 (Fixes)
- **CMS 状态同步**：修复了筛选操作后面包屑状态未及时更新的 Bug（在 `Search.applyFilter` 中补充渲染调用）。
- **样式冲突**：移除了 `music-admin.css` 中与 Viewer 样式冲突的按钮 hover 规则。

# MAERS å‰ç«¯å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£è§„å®šäº†é¡¹ç›®çš„å‰ç«¯å¼€å‘è§„èŒƒã€æœ€ä½³å®è·µä»¥åŠæ³¨æ„äº‹é¡¹ã€‚

---

## ğŸ“‹ ç›®å½• (Table of Contents)

- [1. æ¨¡å—åŒ–è§„èŒƒ (ES6 Modules)](#1-æ¨¡å—åŒ–è§„èŒƒ-es6-modules)
- [2. å…³é”®æ¸²æŸ“è·¯å¾„ (Critical Rendering Path)](#2-å…³é”®æ¸²æŸ“è·¯å¾„-critical-rendering-path)
- [3. æ•°æ®äº¤äº’ (Data Fetching)](#3-æ•°æ®äº¤äº’-data-fetching)
- [4. CSS æ¶æ„ä¸è§„èŒƒ](#4-css-æ¶æ„ä¸è§„èŒƒ)
- [5. ç¼–ç é£æ ¼ (Coding Style)](#5-ç¼–ç é£æ ¼-coding-style)
- [6. å®‰å…¨è§„èŒƒ (Security)](#6-å®‰å…¨è§„èŒƒ-security)
- [7. SVG å›¾æ ‡ä¸»é¢˜é€‚é… (SVG Icon Adaptation)](#7-svg-å›¾æ ‡ä¸»é¢˜é€‚é…-svg-icon-adaptation)
- [8. é€‚é…å™¨æ¨¡å¼ä¸æƒé™éš”ç¦» (Adapter & Permissions)](#8-é€‚é…å™¨æ¨¡å¼ä¸æƒé™éš”ç¦»-adapter--permissions)
- [9. å®¢æˆ·ç«¯æ¨¡æ¿å¼•æ“ (Client-side Templating)](#9-å®¢æˆ·ç«¯æ¨¡æ¿å¼•æ“-client-side-templating)

---

## 1. æ¨¡å—åŒ–è§„èŒƒ (ES6 Modules)


æœ¬é¡¹ç›®å·²å…¨é¢è¿ç§»è‡³åŸç”Ÿ ES6 æ¨¡å—æ ‡å‡†ã€‚

### 1.1 æ–‡ä»¶ç»“æ„ä¸å‘½å
- **åç¼€**: æ‰€æœ‰æ¨¡å—æ–‡ä»¶**å¿…é¡»**ä»¥ `.module.js` ç»“å°¾ã€‚
- **ä½ç½®**: ä¸šåŠ¡é€»è¾‘å­˜æ”¾åœ¨ `custom/<module>/` ç›®å½•ä¸‹ï¼ˆå¦‚ `custom/space/`, `custom/admin-portal/`ï¼‰ã€‚
- **åˆ†ç¦»**: ä¸¥æ ¼åŒºåˆ† Admin (ç®¡ç†ç«¯) å’Œ Viewer (è®¿å®¢ç«¯) ä»£ç ã€‚

### 1.2 å¼•ç”¨æ–¹å¼ (Import/Export)
- **æ˜¾å¼ä¾èµ–**: ä½¿ç”¨ `import` è¯­å¥æ˜¾å¼å£°æ˜æ‰€æœ‰ä¾èµ–é¡¹ã€‚
- **ç›¸å¯¹è·¯å¾„**: å¼•ç”¨é¡¹ç›®å†…æ¨¡å—ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚
- **ä¸¥ç¦å…¨å±€**: ä¸¥ç¦å®šä¹‰æˆ–ä¾èµ– `window.MAERS` å…¨å±€å¯¹è±¡ã€‚ä¸šåŠ¡é€»è¾‘å¿…é¡»é€šè¿‡æ¨¡å—å‚æ•°ä¼ é€’ã€‚
    - **åˆå§‹åŒ–**: å…¨å±€å‘½åç©ºé—´ç”± `shared/namespace.module.js` ç»Ÿä¸€æ„å»ºã€‚
    - **è±å… (Exemptions)**: ä»…å…è®¸ä½¿ç”¨ `MAERS.Toast`, `MAERS.Theme`, `MAERS.ModuleConfig`, `MAERS.Config` è¿™å››ä¸ªåŸºç¡€è®¾æ–½æœåŠ¡ã€‚

```javascript
/* âœ… æ¨èå†™æ³• */
import { api } from '../../../data-manage/api-client.module.js';
import { renderCard } from './cms-card-renderer.module.js';

export function init() { ... }
```

### 1.3 HTML å…¥å£
åœ¨ HTML æ–‡ä»¶ä¸­å¼•ç”¨ä¸”ä»…å¼•ç”¨**ä¸€ä¸ª**ä¸»å…¥å£æ¨¡å—ï¼š

```html
<!-- âœ… æ­£ç¡® -->
<script type="module" src="custom/cms/main.module.js"></script>
```

---

## 2. å…³é”®æ¸²æŸ“è·¯å¾„ (Critical Rendering Path)

ä¸ºäº†æä¾›æè‡´çš„é¦–å±ä½“éªŒå’Œæ— é—ªçƒçš„ä¸»é¢˜åˆ‡æ¢ï¼Œé¡¹ç›®é‡‡ç”¨äº†ç‰¹æ®Šçš„åŠ è½½ç­–ç•¥ã€‚

### 2.1 Flash Guard (é˜²é—ªçƒè„šæœ¬)
`shared/flash-guard.js` æ˜¯é¡¹ç›®ä¸­**å”¯ä¸€çš„**éæ¨¡å—è„šæœ¬ã€‚

- **åŒæ­¥æ‰§è¡Œ**: å¿…é¡»ä½œä¸ºæ™®é€šè„šæœ¬ (`<script src="...">`) åŠ è½½ï¼Œ**ç¦æ­¢**åŠ  `type="module"` æˆ– `defer`ã€‚
- **ä½ç½®**: å¿…é¡»æ”¾åœ¨ `<head>` çš„æœ€é¡¶éƒ¨ï¼ˆæ—©äºæ‰€æœ‰ CSSï¼‰ã€‚
- **èŒè´£**: 
  1. æ³¨å…¥ `.js-loading` å…¨å±é®ç½©æ ·å¼ã€‚
  2. è¯»å– LocalStorage å¹¶è®¾ç½®åˆå§‹ä¸»é¢˜ (`light-mode` class)ã€‚
  3. æ¢å¤ä¹‹å‰çš„ç¼©æ”¾çŠ¶æ€ä¸ Faviconã€‚

### 2.2 èµ„æºåŠ è½½é¡ºåº
1. `<script src="custom/config.js">` (å…¨å±€é…ç½®ç¯å¢ƒ)
2. `<script src="shared/flash-guard.js">` (é˜»å¡å¼é˜²é—ªçƒä¸ä¸»é¢˜åˆå§‹åŒ–)
3. `<link rel="stylesheet" ...>` (å…¨å±€æ ·å¼è¡¨ï¼štheme.css, style.css, responsive.css)
4. `<script type="module" ...>` (ä¸šåŠ¡ä»£ç ï¼šnamespace.module.js -> theme.module.js -> ä¸šåŠ¡å…¥å£)

---

## 3. æ•°æ®äº¤äº’ (Data Fetching)

### 3.1 JSON æ•°æ®æº
æ‰€æœ‰æ•°æ®æ–‡ä»¶å­˜å‚¨åœ¨ `data/` ç›®å½•ä¸‹ï¼Œæ ¼å¼ä¸ºæ ‡å‡† JSONã€‚

### 3.2 å¼‚æ­¥åŠ è½½
ä½¿ç”¨ `fetch` API å¼‚æ­¥è¯»å–æ•°æ®ã€‚ç¦æ­¢ä½¿ç”¨åŒæ­¥ XHR æˆ– `<script src="data.js">` æ–¹å¼ã€‚

```javascript
/* âœ… æ¨èå†™æ³• */
async function loadData() {
    try {
        const response = await fetch('data/notes-tree.json');
        const data = await response.json();
        render(data);
    } catch (e) {
        console.error('Failed to load data:', e);
    }
}
```

- **Static Data**: åˆå§‹ç›®å½•æ ‘ (`*-tree.json`)ã€‚
- **Dynamic Content**: ç‚¹å‡»èŠ‚ç‚¹æ—¶å¼‚æ­¥è¯·æ±‚ `.md` æ–‡ä»¶ã€‚
- **Configuration [NEW]**: æ ‡ç­¾åˆ†ç±» (`data/tags/*.json`)ï¼Œç”± `api.get_categories()` å°è£…è·å–ã€‚

---

## 4. CSS æ¶æ„ä¸è§„èŒƒ

### 4.1 åˆ†å±‚æ¶æ„
- **Base (cms-base.css)**: æ ¸å¿ƒå¸ƒå±€ï¼Œç½‘æ ¼ç³»ç»Ÿï¼Œé›¶æ ·å¼ã€‚
- **Theme (cms-theme-default.css)**: é»˜è®¤çš„ä¸»é¢˜è£…é¥°ï¼ˆåœ†è§’ã€é˜´å½±ã€é¢œè‰²ï¼‰ã€‚
- **Utility (responsive.css)**: å…¨å±€å“åº”å¼æ–­ç‚¹ä¸ç§»åŠ¨ç«¯é€‚é…åŸºå‡†ã€‚
- **Module (literature.css)**: ç‰¹å®šæ¨¡å—çš„è‡ªå®šä¹‰æ ·å¼ã€‚

### 4.2 å˜é‡ä¼˜å…ˆ
ä¼˜å…ˆä½¿ç”¨ `static-style/theme.css` ä¸­å®šä¹‰çš„ CSS å˜é‡ï¼ˆå¦‚ `var(--bg-base)`ï¼‰ï¼Œä»¥è‡ªåŠ¨é€‚é…æ·±è‰²/æµ…è‰²æ¨¡å¼ã€‚

### 4.3 é¿å… !important
é™¤éä¸ºäº†è¦†ç›–ç¬¬ä¸‰æ–¹åº“æ ·å¼æˆ–å¤„ç†çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚ `.d-none !important`ï¼‰ï¼Œå¦åˆ™åº”é¿å…ä½¿ç”¨ `!important`ã€‚

### 4.4 ç§»åŠ¨ç«¯é€‚é…ç­–ç•¥ (Mobile Adaptation)

é¡¹ç›®é‡‡ç”¨**ç‰©ç†éš”ç¦» + æè‡´é™çº§**çš„é€‚é…ç­–ç•¥ã€‚

*   **ç›®å½•**: æ‰€æœ‰é’ˆå¯¹å°å±å¹•ï¼ˆTablet/Mobileï¼‰çš„ Media Queries **ä¸¥ç¦**å†™åœ¨ä¸» CSS æ–‡ä»¶ä¸­ï¼Œå¿…é¡»ç»Ÿä¸€å­˜æ”¾åœ¨ `custom/zmobile adaptation/` ç›®å½•ä¸‹ã€‚
    *   `mobile-global.css`: å¯¹åº” `style.css`
    *   `mobile-cms.css`: å¯¹åº” `cms-base.css`
    *   `mobile-music.css`: å¯¹åº” `music.css`
    *   `mobile-photos.css` & `mobile-photos.js`: å¯¹åº” `photos-viewer.css`
    *   `mobile-album.css`: å¯¹åº” `album-viewer.css`
    *   `mobile-literature.css`: å¯¹åº” `literature.css`
    *   `mobile-games.css`: å¯¹åº” `games.css`
*   **åŠ è½½æ–¹å¼**: å¿…é¡»åœ¨ä¸» CSS æ–‡ä»¶çš„**æœ€é¡¶éƒ¨**é€šè¿‡ `@import` å¼•å…¥ã€‚
    ```css
    /* âœ… æ­£ç¡®å†™æ³• (Top of music.css) */
    @import "../../zmobile adaptation/mobile-music.css";
    ```
*   **æƒé‡ç®¡ç†**: ç§»åŠ¨ç«¯æ ·å¼å¿…é¡»ä½¿ç”¨ `body .selector` æå‡æƒé‡ä»¥è¦†ç›– Desktop æ ·å¼ã€‚

#### æè‡´æ€§èƒ½ä¸æ— åŠ¨ç”» (Performance First)
é’ˆå¯¹ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œé¡¹ç›®å®æ–½äº†**æ¿€è¿›çš„æ€§èƒ½ä¼˜åŒ–**ï¼š
*   **æ— è¿‡æ¸¡ (Zero Transition)**: å¿…é¡»è®¾ç½® `transition: none !important`ã€‚ç§»åŠ¨ç«¯çš„ä¸»é¢˜åˆ‡æ¢åº”æ˜¯ç¬é—´å®Œæˆçš„ã€‚
*   **æ— æ¸²æŸ“ (No Render)**: å¯¹äºä¸éœ€è¦æ˜¾ç¤ºçš„è§†è§‰è£…é¥°ï¼ˆå¦‚ `#theme-mask`ã€æ˜Ÿç©ºèƒŒæ™¯ï¼‰ï¼Œä½¿ç”¨ `display: none` å½»åº•å°†å…¶ä»æ¸²æŸ“æ ‘ä¸­ç§»é™¤ï¼Œè€Œä¸ä»…ä»…æ˜¯ `opacity: 0`ã€‚
*   **æ‰å¹³åŒ–**: ç¦ç”¨ `backdrop-filter`ã€`box-shadow` ç­‰æ˜‚è´µçš„ GPU å±æ€§ã€‚

---

## 5. ç¼–ç é£æ ¼ (Coding Style)

- **äº‹ä»¶é©±åŠ¨**: é¿å…ä½¿ç”¨ `setInterval` è½®è¯¢çŠ¶æ€ã€‚ä½¿ç”¨ç®€å•çš„äº‹ä»¶å‘å¸ƒ/è®¢é˜… (`on/emit`) æ¨¡å¼æ¥é©±åŠ¨ UI æ›´æ–°ã€‚
- **å¼‚æ­¥ç¼–ç¨‹**: ä¼˜å…ˆä½¿ç”¨ `async/await`ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚
- **DOM æ“ä½œ**: ç¼“å­˜ DOM æŸ¥è¯¢ç»“æœï¼Œé¿å…é¢‘ç¹çš„ `document.querySelector`ã€‚
- **æ³¨é‡Š**: å¤æ‚é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Šï¼Œè¯´æ˜"ä¸ºä»€ä¹ˆ"è¿™ä¹ˆåšã€‚

---

## 6. å®‰å…¨è§„èŒƒ (Security)

### 6.1 XSS é˜²æŠ¤ (Cross-Site Scripting)
å‰ç«¯æ¸²æŸ“ç”¨æˆ·ç”Ÿæˆçš„å†…å®¹ï¼ˆå¦‚æœç´¢ç»“æœã€æ–‡ç« æ ‡é¢˜ã€æ–‡ä»¶åˆ—è¡¨ï¼‰æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼è¿›è¡Œ HTML è½¬ä¹‰ã€‚

*   **ç¦æ­¢**: ç›´æ¥ä½¿ç”¨ `innerHTML` æ‹¼æ¥æœªå¤„ç†çš„å­—ç¬¦ä¸²ã€‚
*   **æ¨è**: ä½¿ç”¨ `textContent` æˆ– `innerText`ã€‚
*   **å¿…é¡»**: å¦‚æœå¿…é¡»ä½¿ç”¨ `innerHTML`ï¼ˆå¦‚ä¸ºäº†é«˜äº®å…³é”®è¯ï¼‰ï¼Œ**å¿…é¡»**å…ˆä½¿ç”¨ `Utils.escapeHtml()` å¤„ç†æ‰€æœ‰åŠ¨æ€æ•°æ®ã€‚

```javascript
import { Utils } from '../shared/utils.module.js';

// âŒ å±é™©ï¼ä¸è¦è¿™æ ·åš
el.innerHTML = `<span>${userTitle}</span>`;

// âœ… å®‰å…¨
el.innerHTML = `<span>${Utils.escapeHtml(userTitle)}</span>`;
```

---

## 7. SVG å›¾æ ‡ä¸»é¢˜é€‚é… (SVG Icon Adaptation)

é’ˆå¯¹é¡¹ç›®ä¸­ä½¿ç”¨çš„æç®€å•è‰² SVG å›¾æ ‡ï¼ˆå¦‚çº¯é»‘æˆ–æ·±ç°ï¼‰ï¼Œå¿…é¡»ç¡®ä¿å…¶åœ¨æ˜¼å¤œæ¨¡å¼ä¸‹å…·å¤‡è‰¯å¥½çš„èƒ½è§åº¦ã€‚

### 7.1 æ ¸å¿ƒç­–ç•¥ï¼šCSS Inversion
ç¦æ­¢åœ¨ SVG æ–‡ä»¶å†…éƒ¨ç¡¬ç¼–ç å¤šå¥—é¢œè‰²ã€‚ç»Ÿä¸€ä½¿ç”¨ CSS `filter` æ»¤é•œè¿›è¡ŒåŠ¨æ€åè½¬ã€‚

| ç›®æ ‡æ•ˆæœ | CSS å±æ€§ | é€‚ç”¨åœºæ™¯ |
| :--- | :--- | :--- |
| **çº¯ç™½ (White)** | `filter: invert(1)` | æ ¸å¿ƒå¯¼èˆªå›¾æ ‡ã€ä¸»æ ‡é¢˜å›¾æ ‡ï¼ˆé’ˆå¯¹çº¯é»‘ SVGï¼‰ |
| **æŸ”ç°è‰² (Soft Gray)** | `filter: invert(0.6)` | æ¬¡è¦åˆ—è¡¨å›¾æ ‡ã€åˆ†ç±»æ ‡ç­¾ï¼ˆé’ˆå¯¹æ·±ç° SVGï¼‰ |

### 7.2 é…ç½®è§„èŒƒ
ä¸ºäº†å®ç°é«˜ç²¾å‡†åº¦ä¸”ä¸è¯¯ä¼¤å…¶ä»–èµ„æºï¼Œå¿…é¡»ä½¿ç”¨**å±æ€§é€‰æ‹©å™¨**åŒ¹é…æ–‡ä»¶åã€‚

#### ç¤ºä¾‹ä»£ç  (CSS)ï¼š
```css
/* 1. é»˜è®¤çŠ¶æ€ (æ·±è‰²æ¨¡å¼): åè½¬é¢œè‰² */
.container img[src*="icon-name"] {
    filter: invert(1);
    transition: filter 0.3s ease;
}

/* 2. æµ…è‰²æ¨¡å¼çŠ¶æ€: è¿˜åŸåŸå§‹è‰² */
html.light-mode .container img[src*="icon-name"] {
    filter: none; /* æˆ– invert(0) */
}
```

### 7.3 æ³¨æ„äº‹é¡¹
1.  **åˆ†å¸ƒå¼é€‚é…**: ä¸€ä¸ªå›¾æ ‡è‹¥å‡ºç°åœ¨å¤šä¸ªé¡µé¢ï¼ˆå¦‚é¦–é¡µå¡ç‰‡å’Œåå°æ¨¡å—ï¼‰ï¼Œéœ€è¦åœ¨å„è‡ªå¯¹åº”çš„ CSSï¼ˆå¦‚ `index.css` å’Œ `admin-portal.css`ï¼‰ä¸­åˆ†åˆ«å†™å…¥é€‚é…è§„åˆ™ã€‚
2.  **é¿å…å…¨å±€**: ä¸¥ç¦ç›´æ¥å¯¹æ‰€æœ‰ `img` åº”ç”¨åè½¬ã€‚å¿…é¡»é™åˆ¶åœ¨å…·ä½“çš„å®¹å™¨ï¼ˆå¦‚ `.card-icon` æˆ– `.header-title`ï¼‰å†…ï¼Œå¹¶åŒ¹é…æ–‡ä»¶åå­—ç¬¦ä¸²ã€‚
3.  **ä¿æŒçº¯ç²¹**: é™¤éè§†è§‰ä¸Šæç«¯ä¸æ¸…æ™°ï¼Œå¦åˆ™åº”ä¼˜å…ˆä»…ä½¿ç”¨ `invert()`ï¼Œé¿å…å åŠ çƒ­åº¦æ›´é«˜çš„ `brightness()` æˆ– `contrast()`ï¼Œä»¥ç»´æŠ¤ç‘å£«è®¾è®¡çš„çº¯ç²¹æ„Ÿã€‚

---

## 8. é€‚é…å™¨æ¨¡å¼ä¸æƒé™éš”ç¦» (Adapter & Permissions)

### 8.1 è·¨æ¨¡å—å¤ç”¨ (CMS Adapter)
å¯¹äºéœ€è¦å¤ç”¨ CMS æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚æ ‡ç­¾æŠ½å±‰ã€ç­›é€‰å™¨ï¼‰çš„é CMS æ¨¡å—ï¼ˆå¦‚ Photos, Spaceï¼‰ï¼Œ**å¿…é¡»**ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚
- **Photos**: ä½¿ç”¨ `setupPhotosAdapter` (`custom/photos/admin/photos-cms-adapter.module.js`)
- **Space**: ä½¿ç”¨ `setupSpaceAdapter` (`custom/space/admin/space-cms-adapter.module.js`)

é€‚é…å™¨è´Ÿè´£æ¨¡æ‹Ÿ CMS çš„ `AppState` å’Œ `Controller` æ¥å£ï¼Œä½¿å¾—é€šç”¨ UI ç»„ä»¶èƒ½å¤Ÿæ— æ„ŸçŸ¥åœ°è¿è¡Œåœ¨å¼‚æ„æ•°æ®æºä¸Šã€‚

### 8.2 æƒé™åŒè½¨åˆ¶ (Dual Permission)
åœ¨åˆå§‹åŒ–é€‚é…å™¨æ—¶ï¼Œ**å¿…é¡»**æ˜¾å¼æŒ‡å®šå½“å‰è¿è¡Œç¯å¢ƒçš„æƒé™çŠ¶æ€ï¼Œé˜²æ­¢ç®¡ç† UI æ³„éœ²åˆ°è®¿å®¢ç«¯ã€‚

```javascript
// âŒ é”™è¯¯ï¼šé»˜è®¤ä¼šç»§æ‰¿ IS_ADMIN: true
const adapter = setupPhotosAdapter(callback, controller);

// âœ… æ­£ç¡® (è®¿å®¢ç«¯ Viewer)ï¼š
const adapter = setupPhotosAdapter(callback, controller, {
    initialState: { IS_ADMIN: false } // ğŸ”’ å¼ºåˆ¶é”å®šæƒé™ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨ç¦ç”¨æ ‡ç­¾ç¼–è¾‘å…¥å£
});
```

### 8.3 æ ‡ç­¾æ•°æ®è¯·æ±‚
å‰ç«¯ç»„ä»¶åœ¨åˆå§‹åŒ–æ ‡ç­¾ç³»ç»Ÿæ—¶ï¼Œåº”ä¼˜å…ˆè°ƒç”¨æ˜¾å¼çš„ `get_categories` æ¥å£ï¼Œä»¥è·å–ç‰©ç†å­˜å‚¨çš„ JSON é…ç½®ã€‚
```javascript
const categories = await api.get_categories(moduleName);
```

---

## 9. å®¢æˆ·ç«¯æ¨¡æ¿å¼•æ“ (Client-side Templating)

ä¸ºäº†è§£å†³ JS å­—ç¬¦ä¸²æ‹¼æ¥ HTML å¸¦æ¥çš„ XSS é£é™©å’Œå¯è¯»æ€§å·®çš„é—®é¢˜ï¼Œé¡¹ç›®å¼•å…¥äº† **å®¢æˆ·ç«¯æ¨¡æ¿å¼•æ“** (`shared/templates.module.js`)ã€‚

### 9.1 æ ¸å¿ƒåŸåˆ™
- **Use Templates**: æ‰€æœ‰çš„å¤æ‚ UI ç‰‡æ®µï¼ˆCard, List Itemï¼‰éƒ½åº”å®šä¹‰åœ¨ HTML `<template>` æ ‡ç­¾ä¸­ã€‚
- **Clone & Fill**: ä½¿ç”¨ JS å…‹éš†æ¨¡æ¿å†…å®¹ï¼Œå¹¶é€šè¿‡ `data-*` å±æ€§è‡ªåŠ¨å¡«å……æ•°æ®ã€‚

### 9.2 ç¤ºä¾‹
HTML:
```html
<template id="card-template">
    <div class="card">
        <h3 data-text="title">Title</h3>
        <img data-src="cover" alt="Cover">
    </div>
</template>
```

JS:
```javascript
import { Templates } from '../../../shared/templates.module.js';

const tmpl = Templates.get('card-template');
const clone = Templates.clone(tmpl);
Templates.bind(clone, {
    title: "My Project",
    cover: "img.jpg"
});
parent.appendChild(clone);
```

---

## 10. å›¾åƒå¤„ç†ä¸æ‡’åŠ è½½ (Image Handling)

### 10.1 åŸç”Ÿæ‡’åŠ è½½ (Native Lazy Loading)
å…¨é¢åºŸå¼ƒ JS æ¨¡æ‹Ÿçš„ `IntersectionObserver` æ‡’åŠ è½½æ–¹æ¡ˆã€‚
- **HTML**: æ‰€æœ‰å›¾ç‰‡æ ‡ç­¾å¿…é¡»æ·»åŠ  `loading="lazy"` å±æ€§ã€‚
- **CSS**: é…åˆ `object-fit: cover` å®ç°è£å‰ªæ•ˆæœï¼Œæ›¿ä»£ `background-image`ã€‚

```html
<!-- âœ… æ¨èå†™æ³• -->
<img src="..." loading="lazy" style="object-fit: cover; width: 100%; height: 100%;">
```

### 10.2 ç¼©ç•¥å›¾ç­–ç•¥
ä¸Šä¼ å›¾ç‰‡æ—¶åç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆä¸‰ç§è§„æ ¼ï¼š
- **Origin**: åŸå§‹æ–‡ä»¶ (ä¸‹è½½ç”¨)ã€‚
- **Preview**: 1600px AVIF (ç¯ç®±æŸ¥çœ‹ç”¨)ã€‚
- **Thumbnail**: 400px WebP (åˆ—è¡¨å±•ç¤ºç”¨)ã€‚
å‰ç«¯åº”æ ¹æ®åœºæ™¯é€‰ç”¨æ­£ç¡®çš„è·¯å¾„ï¼Œä¸¥ç¦åœ¨åˆ—è¡¨é¡µç›´æ¥åŠ è½½åŸå›¾ã€‚
